<script>
    const startScreen = document.getElementById("start-screen");
    const video = document.getElementById("bg-video");
    const music = document.getElementById("bg-music");
    const overlayImage = document.getElementById("overlay-image");

    // LISTA VIDEO
    let videos = [
        "video.mp4",
        "video2.mp4",
        "video3.mp4",
        "video4.mp4",
        "video5.mp4"
    ];

    let playlist = [];
    let currentIndex = 0;

    // Funzione per mischiare l’array (Fisher-Yates)
    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function startPlaylist() {
        playlist = shuffle([...videos]);
        currentIndex = 0;
        playVideo(playlist[currentIndex]);
    }

    function playVideo(src) {
        video.src = src;
        video.load();
        video.play();
    }

    // Quando un video finisce → passa al successivo
    video.addEventListener("ended", () => {
        currentIndex++;

        if (currentIndex >= playlist.length) {
            startPlaylist(); // rimescola e riparti
        } else {
            playVideo(playlist[currentIndex]);
        }
    });

    startScreen.addEventListener("click", () => {

        // Evita doppi click
        startScreen.style.pointerEvents = "none";

        // Avvia musica
        music.play();

        // Mostra video
        video.style.display = "block";

        // Avvia playlist
        startPlaylist();

        // Dissolvenza schermata iniziale
        startScreen.style.opacity = "0";
        setTimeout(() => {
            startScreen.style.display = "none";
        }, 1000);

        // Immagine dopo 20 secondi
        setTimeout(() => {
            overlayImage.style.display = "block";
        }, 20000);
    });
</script>
