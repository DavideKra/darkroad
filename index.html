<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Darkroad – Versione 1.5</title>

<style>
html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    background: black;
    font-family: Arial, sans-serif;
}

/* VIDEO */
#bg-video {
    position: fixed;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 0;
}

/* START */
#start-screen {
    position: fixed;
    inset: 0;
    background: url("000.png") center / cover no-repeat;
    z-index: 10;
    cursor: pointer;
    transition: opacity 1s ease;
}

/* LAYER IMMAGINI */
#image-layer {
    position: fixed;
    inset: 0;
    z-index: 5;
    pointer-events: none;
}

/* IMMAGINI — SEMPRE SOLIDE */
.scene-image {
    position: absolute;
    top: 50%;
    left: 50%;
    max-width: 80vw;
    max-height: 80vh;
    opacity: 1;
    transform: translate(-50%, -50%);
    transition: transform 2s cubic-bezier(.4,0,.2,1);
}

/* ENTRATE — FUORI SCHERMO */
.enter-left   { transform: translate(-150%, -50%); }
.enter-right  { transform: translate(50%, -50%); }
.enter-top    { transform: translate(-50%, -150%); }
.enter-bottom { transform: translate(-50%, 50%); }

/* CENTRO */
.center {
    transform: translate(-50%, -50%);
}

/* USCITE — FUORI SCHERMO */
.exit-left   { transform: translate(-200%, -50%); }
.exit-right  { transform: translate(100%, -50%); }
.exit-top    { transform: translate(-50%, -200%); }
.exit-bottom { transform: translate(-50%, 100%); }

/* UI */
#version-label {
    position: fixed;
    bottom: 20px;
    right: 20px;
    color: white;
    font-size: 14px;
    opacity: 0.7;
    z-index: 20;
}

#music-toggle {
    position: fixed;
    bottom: 20px;
    left: 20px;
    z-index: 20;
    background: rgba(0,0,0,0.5);
    color: white;
    border: 1px solid rgba(255,255,255,0.3);
    padding: 8px 14px;
    font-size: 13px;
    cursor: pointer;
}
</style>
</head>

<body>

<video id="bg-video" muted playsinline></video>

<audio id="bg-music">
    <source src="Dark Road.mp3" type="audio/mpeg">
</audio>

<div id="start-screen"></div>
<div id="image-layer"></div>

<button id="music-toggle">Pausa musica</button>
<div id="version-label">Versione 1.5</div>

<script>
const startScreen = document.getElementById("start-screen");
const video = document.getElementById("bg-video");
const music = document.getElementById("bg-music");
const layer = document.getElementById("image-layer");
const musicBtn = document.getElementById("music-toggle");

/* VIDEO */
const videos = ["video.mp4","video2.mp4","video3.mp4","video4.mp4","video5.mp4"];
let vIndex = Math.floor(Math.random() * videos.length);

function playVideo() {
    video.src = videos[vIndex];
    video.play();
}
video.onended = () => {
    vIndex = (vIndex + 1) % videos.length;
    playVideo();
};

/* ANIMAZIONI (ENTRATA = USCITA COERENTE) */
const animations = [
    { enter: "enter-left",   exit: "exit-right"  },
    { enter: "enter-right",  exit: "exit-left"   },
    { enter: "enter-top",    exit: "exit-bottom" },
    { enter: "enter-bottom", exit: "exit-top"    }
];

/* TIMELINE */
const timeline = [
    { src: "intro.png", center: 5 },
    { src: "001.png", center: 20 },
    { src: "002.png", center: 25 },
    { src: "003.png", center: 30 },
    { src: "004.png", center: 36 },
    { src: "005.png", center: 41 },
    { src: "006.png", center: 47 },
    { src: "007.png", center: 51 },
    { src: "008.png", center: 57 },
    { src: "009.png", center: 62 },
    { src: "010.png", center: 68 },
    { src: "011.png", center: 73 },
    { src: "012.png", center: 79 },
    { src: "013.png", center: 83 },
    { src: "014.png", center: 89 },
    { src: "015.png", center: 94 },
    { src: "016.png", center: 99 },
    { src: "017.png", center: 105 },
    { src: "018.png", center: 110 },
    { src: "019.png", center: 115 },
    { src: "020.png", center: 121 },
    { src: "021.png", center: 127 },
    { src: "022.png", center: 132 },
    { src: "023.png", center: 137 },
    { src: "024.png", center: 142 },
    { src: "025.png", center: 148 },
    { src: "026.png", center: 153 },
    { src: "027.png", center: 159 },
    { src: "028.png", center: 164 },
    { src: "029.png", center: 169 },
    { src: "030.png", center: 174 },
    { src: "031.png", center: 179 },
    { src: "032.png", center: 184 },
    { src: "033.png", center: 190 },
    { src: "034.png", center: 195 },
    { src: "035.png", center: 201 },
    { src: "036.png", center: 206 },
    { src: "037.png", center: 212 },
    { src: "038.png", center: 217 },
    { src: "039.png", center: 223 },
    { src: "040.png", center: 228 }
];

/* AVVIO */
startScreen.onclick = () => {
    startScreen.style.opacity = "0";
    setTimeout(() => startScreen.remove(), 1000);
    playVideo();
    music.play();
    startTimeline();
};

function startTimeline() {
    timeline.forEach((item, i) => {
        const anim = animations[Math.floor(Math.random() * animations.length)];
        const img = document.createElement("img");
        img.src = item.src;
        img.className = `scene-image ${anim.enter}`;
        layer.appendChild(img);

        const enterTime = (item.center - 2) * 1000;
        const next = timeline[i + 1];
        const exitTime = next ? (next.center - 2) * 1000 : null;

        /* ENTRATA */
        setTimeout(() => {
            img.classList.add("center");
        }, enterTime);

        /* USCITA */
        if (exitTime !== null) {
            setTimeout(() => {
                img.classList.remove("center");
                img.classList.add(anim.exit);
            }, exitTime);
        }

        /* RIMOZIONE DOPO USCITA COMPLETA */
        const removeAt = next ? next.center * 1000 : (item.center + 2) * 1000;
        setTimeout(() => img.remove(), removeAt);
    });
}

/* PAUSA MUSICA */
musicBtn.onclick = () => {
    if (music.paused) {
        music.play();
        musicBtn.textContent = "Pausa musica";
    } else {
        music.pause();
        musicBtn.textContent = "Riprendi musica";
    }
};
</script>

</body>
</html>
